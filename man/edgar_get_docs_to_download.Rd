% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/DocumentDownload.R
\name{edgar_get_docs_to_download}
\alias{edgar_get_docs_to_download}
\title{Determine SEC EDGAR Documents Needing Download}
\usage{
edgar_get_docs_to_download(.dir, .doc_ids)
}
\arguments{
\item{.dir}{Character string. Base directory of the SEC EDGAR dataset. Used to locate:
\itemize{
\item The Arrow dataset directory of “link” metadata (via \code{lp_$DocLinks$DirMain$Links})
\item The root folders for \code{DocumentData$Original} and \code{DocumentData$Parsed}
}}

\item{.doc_ids}{Character vector. One or more \code{DocID} values to look up in the “link” dataset.
Only those IDs that have no existing parsed file will appear in the returned tibble.}
}
\value{
A tibble with the following columns:
\describe{
\item{\code{YearQuarter}}{Numeric (e.g., 2023.1) from the “links” dataset.}
\item{\code{DocTypeMod}}{Character. Standardized document type (e.g., “10-K”).}
\item{\code{DocID}}{Character. The unique document identifier.}
\item{\code{UrlDocument}}{Character. The HTTP URL where the original filing sits.}
\item{\code{YQSave}}{Character (e.g., “2023-1”). Used in directory naming.}
\item{\code{TypeSave}}{Character. Cleaned \code{DocTypeMod} with no spaces or “/”.}
\item{\code{DocExt}}{Character. Lower-case file extension (e.g., “html”, “pdf”).}
\item{\code{PathOrig}}{Character. Full path where the downloaded original will be stored.}
\item{\code{PathParse}}{Character. Full path where the parsed Parquet file will be written.}
}
}
\description{
Builds a tibble of metadata and file paths for all requested document IDs (\code{.doc_ids})
that have not yet been parsed. It reads the EDGAR “links” dataset (via Arrow), filters
for the specified \code{DocID}s, standardizes document types with a lookup table, and
constructs filesystem paths for the original and parsed files. Only rows whose parsed
Parquet file does not already exist are returned.
}
\keyword{internal}
