% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Utils.R
\name{loop_wait_time}
\alias{loop_wait_time}
\title{Manage Rate Limiting Wait Time}
\usage{
loop_wait_time(.last_time, .workers, .queries_per_second = 10)
}
\arguments{
\item{.last_time}{POSIXct timestamp from the previous iteration}

\item{.workers}{Number of parallel workers being used}

\item{.queries_per_second}{Maximum number of queries allowed per second (default: 10)}
}
\value{
A list containing:
\itemize{
\item new_time: POSIXct timestamp after any implemented wait
\item msg: Formatted string with timing details in the format
"Loop: Xs + Ys = Zs (Target: Ws)" where:
- X is the actual loop execution time
- Y is the additional wait time
- Z is the total time
- W is the target time between iterations
}
}
\description{
Controls the timing between iterations in a parallel processing loop to maintain
a specified query rate limit. The function calculates and implements necessary
wait times based on the number of workers and desired queries per second.
}
\details{
The function:
\enumerate{
\item Calculates required wait time based on workers and query limit (plus 0.1s buffer)
\item Measures actual loop execution time
\item Implements additional wait if needed
\item Provides detailed timing information
}

The needed wait time is calculated as: (workers / queries_per_second) + 0.1
This ensures the rate limit is maintained across parallel workers with a small
safety buffer.
}
\keyword{internal}
